# Tieme Ndo - Back-end

## Staff member table schema

field      | data type    | metadata
---------- | ------------ | ----------------------------------------------------
id         | unsigned int | primary key, auto-increments, generated by database
username   | string       | required
first_name | string       | required
last_name  | string       | required 
password   | string       | required


## Client table schema

field         | data type    | metadata
------------- | ------------ | ----------------------------------------------------
id            | unsigned int | primary key, auto-increments, generated by database
name          | string       | required
village       | string       | required
loan_amount   | float        | required 
loan_start    | date         | required, "YYYY-MM-DD"
loan_due      | date         | required
last_payment  | float        | optional
payment_date  | date         | optional
harvest_yield | integer      | optional
sales_goal    | integer      | optional

----------------------

## Endpoints

### Register a new staff member
- Type: Post
- Endpoint: https://tieme-ndo-5.herokuapp.com/staff/register
- Token: Not required
- Returns: 
    - Success message
    - id

- Example:
 ```js
{
    "username": "pt",        // required
    "first_name": "pat",     // required
    "last_name": "thompson", // required
    "password": "tester"     // required
}
```
----------------------

### Log in an existing staff member
- Type: Post
- Endpoint: https://tieme-ndo-5.herokuapp.com/staff/login
- Token: Not required
- Returns:
    - Welcome message
    - JSON web token

- Example:
```js
{
    "username": "yb",    // required
    "password": "tester" // required
}
```
----------------------

### Get a list of existing staff
- Type: Get
- Endpoint: https://tieme-ndo-5.herokuapp.com/staff/
- Token: Required
- Returns:
    - List of staff members

----------------------

### Get staff member by id
- Type: Get
- Endpoint: https://tieme-ndo-5.herokuapp.com/staff/member/:id
- Token: Required
- Returns:
    - Staff member

----------------------

### Delete staff member
- Type: Delete
- Endpoint: https://tieme-ndo-5.herokuapp.com/staff/remove/:id
- Token: Required
- Returns:
    - Success message

----------------------

### Update a staff member's information
- Type: Put
- Endpoint: https://tieme-ndo-5.herokuapp.com/staff/update/:id
- Token: Required
- Returns:
    - Updated staff member record
- Notes:
    - "username", "first_name", and/or "last_name" can be updated
    - It is only necessary to submit the information to update. Other field may be omitted

- Example:
```js
{
    "first_name": "Clarence"
}
```
----------------------

### Get a list of clients
- Type: Get
- Endpoint: https://tieme-ndo-5.herokuapp.com/clients
- Token: Required
- Returns:
    - List of existing clients

----------------------

### Get client by id
- Type: Get
- Endpoint: https://tieme-ndo-5.herokuapp.com/clients/:id
- Token: Required
- Returns:
    - Client info

----------------------

### Register a new client
- Type: Post
- Endpoint: https://tieme-ndo-5.herokuapp.com/clients/register
- Token: Required
- Returns:
    - Success message
    - id

- Example:
```js
{
    "name": "arthur",              // required
	"village": "arthurville",      // required
	"loan_amount": 10.5,           // required
	"loan_start": "2019-12-01",    // required
	"loan_due": "2021-12-01",      // required
    "last_payment": 2.3,           // optional, defaults to null
    "payment_date": "2020-01-01",  // optional, defaults to null
    "harvest_yield": 7,            // optional, defaults to null
    "sales_goal": 6                // optional, defaults to null
}
```
----------------------

### Update existing client information
- Type: Put
- Endpoint: https://tieme-ndo-5.herokuapp.com/clients/8/update
- Token: Required
- Returns:
    - Updated client info
    - It is only necessary to submit the information to update. Other field may be omitted.

- Example:
```js
{
    "name": "pat",
    "sales_goal": 4
}
```
----------------------

### Delete client
- Type: Delete
- Endpoint: https://tieme-ndo-5.herokuapp.com/clients/remove/:id
- Token: Required
- Returns:
    - Success message

----------------------

### Update loan amount and payment
** This endpoint updates the "last_payment" and "payment_date" and adjusts the "loan_amount" field**
- Type: Put
- Endpoint: https://tieme-ndo-5.herokuapp.com/clients/:id/update/payment
- Returns:
    - Updated client information

- Example:
```js
{
    "last_payment": 12,            // required
    "payment_date": "2020-01-01"   // required
}
```